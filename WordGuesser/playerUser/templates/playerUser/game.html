{% include 'playerUser/navigator.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Guesser Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .game-cell {
            width: 60px;
            height: 60px;
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
        }
    </style>
</head>
<body id="game-container">
    <div class="container mt-4" tabindex="0">
        <div class="navbar navbar-dark bg-dark shadow text-light d-flex justify-content-between align-items-center bg-light p-4 mb-4 rounded">
            <h2 class="mb-0">Welcome to Word Guesser</h2>
            <div>
                <h4 class="mb-0">Attempts Left: {{ attemptsLeft }}</h4>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-7">
                    <div id="game-grid" class="d-flex flex-column align-items-center justify-content-center mb-4 mt-4">
                        {% if grid %}
                            {% for row in grid %}
                                <div class="d-flex mb-2">
                                    {% for cell in row %}
                                        {% if cell.status == 'correct' %}
                                            <div class="game-cell btn btn-success border-dark m-2">{{ cell.char }}</div>
                                        {% elif cell.status == 'wrong_position' %}
                                            <div class="game-cell btn border-dark m-2" style="background-color: #e36110; color: white;">{{ cell.char }}</div>
                                        {% else %}
                                            <div class="game-cell btn btn-secondary border-dark m-2">{{ cell.char }}</div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            {% endfor %}
                        {% endif %}
                        {% for row in choicesLeft %}
                            <div class="d-flex mb-2">
                                {% for col in '12345' %}
                                    <div class="game-cell btn btn-light m-2 border-dark"></div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="col-md-5 d-flex justify-content-start align-items-center ">
                    <div id="keyboard" class="d-flex justify-content-center align-items-end mb-4 mt-5 mr-5 border-dark">
                        {% if error_message %}
                            <div class="alert alert-warning mb-3">
                                {{ error_message }}
                            </div>
                        {% elif won %}
                            <div class="alert alert-success mb-3">
                                <h4 class="alert-heading">Congratulations!</h4>
                                <p>You've guessed the word correctly!</p>
                                <hr>
                                <a href="{% url 'playerUser:restart' %}"class="btn btn-secondary w-100">Start New Game</a>
                            </div>
                        {% elif lost %}
                            <div class="alert alert-danger mb-3">
                                <h4 class="alert-heading">Game Over!</h4>
                                <p>You've used all your attempts. Better luck next time!</p>
                                <hr>
                                <a href="{% url 'playerUser:restart' %}"class="btn btn-secondary w-100">Start New Game</a>
                            </div>
                        {% else %}
                            <form method="POST" action="{% url 'playerUser:game' %}">
                            {% csrf_token %}
                            <div>
                                <input id="guessInput" name="guessInput" type="text" 
                                    maxlength="5" minlength="5" required
                                    class="form-control text-center mb-3 text-uppercase" 
                                    style="width: 20vw" 
                                    maxlength="5" minlength="5" required
                                    placeholder="Enter 5-lettered guess">
                                <button type="submit" class="btn btn-primary w-100 mb-3">Submit Guess</button>

                            <a href="{% url 'playerUser:restart' %}"class="btn btn-secondary w-100">Start New Game</a>
                            </div>
                        </form>
                        {% endif %}
                            </div>
                        </form>
                    </div>
                </div>
        </div>

</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js">

</script>
</html>